<!DOCTYPE html>
<html lang = "es">
<head>

    <title> Tasks Manager </title>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel = "stylesheet" type = "text/css" href = "style/tasksScreen.css">
    <link rel = "stylesheet" href = "style/tasksPrint.css" media = "print">
    <link href = "https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel = "stylesheet" integrity = "sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin = "anonymous">
    
    <link rel = "apple-touch-icon" sizes = "180x180" href = "./images/icons/apple-touch-icon.png">
    <link rel = "icon" type = "image/png" sizes = "32x32" href = "./images/icons/favicon-32x32.png">
    <link rel = "icon" type = "image/png" sizes = "16x16" href = "./images/icons/favicon-16x16.png">
    <link rel = "shortcut icon" href = "./images/icons/favicon.ico">

</head>
<body>
    <div class = "container-fluid">

        <header>
            <div class="row">
                <nav class = "navbar navbar-expand-sm navbar-dark bg-dark fixed-top">
                
                    <a href = "" class = "navbar-brand ms-4">
                        <img src = "images/icons/favicon-32x32.png" alt = "Tasks Manager Logo">
                    </a>
    
                    <div class = "ms-auto d-flex">
                        
                        <span id = "userImage">
                            <img src = "/imageUser" alt = "User image" class = "rounded-circle">
                        </span>
                        
                        <div class = "ms-3" id = "user">
                            <div class = "bg-primary" id = "name">
                                <h6> <%= user %> </h6>
                            </div>
                            <div id = "logout">
                                <button type = "button" class = "btn btn-secondary"> 
                                    <a href= "/logout" id = "logout"> Desconectar </a>
                                </button>
                            </div>
                        </div>
                        
                    </div>
                    
                </nav>
            </div>
            
        </header>

        <section>
            <ul id = "tasksList">
                
                <% tasks.forEach((task) => { %>
                    <% if (task.Done) { %> 

                        <li class = "row justify-content-center align-items-center bg-light" id = "allTask">
                            <span class = "col col-sm-4 col-md-4 col-xl-4 align-items-center justify-content-center" id = "done">
                                <h6> <%= task.Text %> </h6>
                            </span>
                        </li>
                    
                    <% }  else { %>
                        <li class = "row justify-content-center align-items-center bg-light" id = "allTask">
                            
                            <span class = "col col-sm col-md col-xl align-items-center justify-content-center" id = "task">
                                <h6> <%=task.Text%> </h6>
                            </span>
                    
                            <% task.Tags.forEach((tag) => { %> 
                                <span class = "col col-sm col-md col-xl bg-secondary" id = "tags">
                                    <h6> <%= tag %></h6>
                                </span>
                            <% }); %>
                    
                            <span class = "col offset col-sm col-md col-xl" id = "btnFin">
                                <button tyoe = "button" class = "btn btn-success">
                                    <a href = "/finish/<%= task.Id %>" id = "finalished"> Finalizar </a>
                                </button>
                            </span>
                    
                        </li>
                    <% } %>
                    <% }); %>

            </ul>
        </section>

        <section>
            <div class = "row align-items-center justify-content-center w-50" id = "options">
                
                <span class = "col col-sm-3 col-md-3 col-xl-3">
                    <button type = "button" class = "btn btn-danger">
                        <a href = "/deletedCompleted" id = "delete"> Eliminar Finalizadas </a>
                    </button>
                </span>

                <span class = "offset-md col col-sm col-md col-xl p-3" id = "addTask">
                    <form method = "POST" action = "/addTask">
                        <input type = "text" placeholder = "New Task" name = "newTask">
                        <button type = "submit" class = "btn btn-primary">Add Task </button>
                    </form>
                </div>
            </div>
        </section>
    </div>
</body>
</html>

